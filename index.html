<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Be My Valentine? ðŸ’˜</title>

<style>
/* ---------- styles unchanged (trimmed explanation) ---------- */
:root{
  --card: rgba(255,255,255,.16);
  --card-border: rgba(255,255,255,.28);
  --glow: rgba(255, 77, 141, .35);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto;
  background: linear-gradient(135deg,#ff2d6f,#ff7aa8,#ffd1dc);
  overflow:hidden;
}

.bg-hearts{ position:fixed; inset:0; pointer-events:none; opacity:.55; }
.bg-hearts span{
  position:absolute;
  bottom:-60px;
  font-size:20px;
  animation: floatUp linear infinite;
}
@keyframes floatUp{ to{ transform:translateY(-120vh); opacity:0; } }

.music-btn{
  position:absolute; top:18px; right:18px;
  width:46px; height:46px; border-radius:50%;
  background:rgba(255,255,255,.2);
  border:1px solid rgba(255,255,255,.3);
  color:#fff; font-size:18px;
  cursor:pointer; z-index:10;
}

.card{
  width:min(900px,92vw);
  padding:32px;
  border-radius:24px;
  background:var(--card);
  border:1px solid var(--card-border);
  box-shadow:0 30px 80px rgba(0,0,0,.25),0 0 70px var(--glow);
  position:relative;
}

.stage{
  position:relative;
  height:260px;
  margin-top:20px;
  border-radius:20px;
  border:1px dashed rgba(255,255,255,.3);
}

.btn{
  position:absolute;
  padding:14px 20px;
  border-radius:16px;
  font-size:18px;
  font-weight:800;
  cursor:pointer;
}

#yesBtn{
  background:rgba(255,255,255,.25);
  border:1px solid rgba(255,255,255,.4);
  transition:transform .2s ease;
}

#noBtn{
  background:rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.3);
  pointer-events:none;
}

.hint{ text-align:center; margin-top:14px; opacity:.9; }

.overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.4);
  display:none; align-items:center; justify-content:center;
}
.overlay.show{ display:flex; }

.modal{
  background:rgba(255,255,255,.2);
  padding:28px;
  border-radius:20px;
  text-align:center;
}
</style>
</head>

<body>

<div class="bg-hearts" id="bgHearts"></div>

<button class="music-btn" id="musicBtn">ðŸ”‡</button>

<main class="card">
  <h1>Will you be my Valentine? ðŸ’–</h1>

  <section class="stage" id="stage">
    <button class="btn" id="yesBtn">YES ðŸ’ž</button>
    <button class="btn" id="noBtn">NO ðŸ™ˆ</button>
  </section>

  <div class="hint">Together since <code>27/02/2018</code> ðŸ’–</div>
</main>

<div class="overlay" id="overlay">
  <div class="modal">
    <h2>YAAAY ðŸ’˜</h2>
    <p>You just made my heart melt completely ðŸ¥¹</p>
  </div>
</div>

<script>
/* ---------------- HEARTS ---------------- */
const bg = document.getElementById("bgHearts");
["ðŸ’–","ðŸ’˜","ðŸ’ž","ðŸ’•"].forEach((h,i)=>{
  const s=document.createElement("span");
  s.textContent=h;
  s.style.left=Math.random()*100+"vw";
  s.style.animationDuration=6+Math.random()*8+"s";
  bg.appendChild(s);
});

/* ---------------- MUSIC (FIXED) ---------------- */
const musicBtn = document.getElementById("musicBtn");
const MUSIC_URL="https://cdn.pixabay.com/download/audio/2022/10/30/audio_5d7a5d6c63.mp3";

const bgMusic=new Audio(MUSIC_URL);
bgMusic.loop=true;
bgMusic.volume=0.35;

let musicEnabled=false;

function updateMusicIcon(){
  musicBtn.textContent = musicEnabled ? "ðŸ”Š" : "ðŸ”‡";
}

async function playMusic(){
  if(!musicEnabled) return;
  try{ await bgMusic.play(); }catch(e){}
}

musicBtn.onclick=async()=>{
  musicEnabled=!musicEnabled;
  updateMusicIcon();
  await playMusic();
};

/* ---------------- BUTTON LOGIC ---------------- */
const stage=document.getElementById("stage");
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const overlay=document.getElementById("overlay");

let yesScale=1;

function moveNo(){
  const r=stage.getBoundingClientRect();
  noBtn.style.left=Math.random()*(r.width-100)+"px";
  noBtn.style.top=Math.random()*(r.height-50)+"px";
  yesScale=Math.min(yesScale+0.12,2.6);
  yesBtn.style.transform=`scale(${yesScale})`;
}

stage.onmousemove=e=>{
  const n=noBtn.getBoundingClientRect();
  if(Math.hypot(e.clientX-n.left,e.clientY-n.top)<120) moveNo();
};

yesBtn.onclick=async()=>{
  musicEnabled=true;
  updateMusicIcon();
  await playMusic();
  overlay.classList.add("show");
};

/* init positions */
yesBtn.style.left="25%";
yesBtn.style.top="55%";
noBtn.style.left="70%";
noBtn.style.top="55%";
</script>

</body>
</html>
